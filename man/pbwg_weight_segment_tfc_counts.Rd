% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flight_list.R
\name{pbwg_weight_segment_tfc_counts}
\alias{pbwg_weight_segment_tfc_counts}
\title{NM area traffic by wake turbulence category}
\usage{
pbwg_weight_segment_tfc_counts(wef, til, conn = NULL)
}
\arguments{
\item{wef}{Start date (inclusive). Can be anything that
\code{\link[lubridate:as_date]{lubridate::as_date()}} understands.}

\item{til}{End date (inclusive). Can be anything that
\code{\link[lubridate:as_date]{lubridate::as_date()}} understands.}

\item{conn}{Optional Oracle \link[DBI:DBIConnection-class]{DBI::DBIConnection}. When omitted a fresh
connection to \code{PRUDEV} is created via \code{\link[eurocontrol:db_connection]{eurocontrol::db_connection()}}, with
access to \code{SWH_FCT.V_FAC_FLIGHT_MS} and \code{PRUDEV.V_PRU_AIRCRAFT_CATEGORY}.}
}
\value{
A \code{\link[tibble:tibble]{tibble::tibble()}} with one row per day/category combination and an
attached \code{"sql"} attribute. Columns:
\itemize{
\item \code{ENTRY_DATE}: truncated IFPZ entry date (UTC).
\item \code{MONTH}: numeric month extracted from \code{ENTRY_DATE}.
\item \code{YEAR}: numeric year extracted from \code{ENTRY_DATE}.
\item \code{WK_TBL_CAT}: wake turbulence category (L/M/H/J/UNK).
\item \code{CATEGORY1}: aircraft category level 1 from \code{V_PRU_AIRCRAFT_CATEGORY}.
\item \code{CATEGORY2}: aircraft category level 2 from \code{V_PRU_AIRCRAFT_CATEGORY}.
\item \code{FLIGHT}: count of flights for the date/category combination.
\item \code{UNIT_CODE}: fixed \code{"NM_AREA"}.
\item \code{UNIT_NAME}: fixed \code{"Total Network Manager Area"}.
}
}
\description{
Counts Network Manager area flights per day and wake turbulence category,
filtering to operational statuses (\code{TE}, \code{TA}, \code{AA}) and the requested date
window. Uses \code{\link[eurocontrol:flights_tbl]{eurocontrol::flights_tbl()}} as the base and joins aircraft
categories from \code{PRUDEV.V_PRU_AIRCRAFT_CATEGORY} (limited to PBWG-allowed
categories) before aggregating.
}
